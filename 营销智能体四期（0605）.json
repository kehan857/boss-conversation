{
  "nodes": [
    {
      "nodeId": "userGuide",
      "name": "common:core.module.template.system_config",
      "intro": "common:core.module.template.system_config_info",
      "avatar": "core/workflow/template/systemConfig",
      "flowNodeType": "userGuide",
      "position": {
        "x": -3465.316009755823,
        "y": -1015.6286612457163
      },
      "version": "481",
      "inputs": [
        {
          "key": "welcomeText",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "core.app.Welcome Text",
          "value": ""
        },
        {
          "key": "variables",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "core.app.Chat Variable",
          "value": []
        },
        {
          "key": "questionGuide",
          "valueType": "boolean",
          "renderTypeList": [
            "hidden"
          ],
          "label": "core.app.Question Guide",
          "value": false
        },
        {
          "key": "tts",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "type": "web"
          }
        },
        {
          "key": "whisper",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "open": false,
            "autoSend": false,
            "autoTTSResponse": false
          }
        },
        {
          "key": "scheduleTrigger",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": null
        }
      ],
      "outputs": [],
      "isFolded": false
    },
    {
      "nodeId": "448745",
      "name": "common:core.module.template.work_start",
      "intro": "",
      "avatar": "core/workflow/template/workflowStart",
      "flowNodeType": "workflowStart",
      "position": {
        "x": -3411.388587564118,
        "y": -2438.160088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "common:core.module.input.label.user question",
          "required": true,
          "toolDescription": "用户问题",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "userChatInput",
          "key": "userChatInput",
          "label": "common:core.module.input.label.user question",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dT1wVEwObdVg",
      "name": "交流及项目库搜索",
      "intro": "workflow:template.dataset_search_intro",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 2973.111412435882,
        "y": -2168.410088177884
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "common:core.module.input.label.Select dataset",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "{\n  datasetId: string;\n}[]",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.55,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 12900,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "embedding",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "embeddingWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "gpt-4o",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "gpt-4o-mini",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "需要检索的内容",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "workflow:collection_metadata_filter",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "ivmHqG9kkBrT",
      "name": "判断器",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 5468.611412435882,
        "y": -1962.910088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "dT1wVEwObdVg",
                    "quoteQA"
                  ],
                  "condition": "isNotEmpty"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "a5uiaEgOM4WO",
      "name": "AI 项目及其他知识库没有",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8082.611412435882,
        "y": -2340.910088177884
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 1,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n1. 用口语化的表达方式进行回复\n2. 回答控制在100字以内\n3. 禁止出现以下内容：  \n   - \"根据知识库\"、\"如文档所述\"等引用提示  \n   - “我们的项目”\n   - “投资”、“挣钱”、“保本”、“保收益”、“保盈利”\n   - \"您还有其他问题吗？\"等客服话术  \n   - “加微信”，\"发您邮箱“\n   - “不知道”、“不清楚”\n4. 所有项目要说我们加速孵化的项目\n5. 你在微信中与客户沟通\n6. 将话术中所有出现的投资改为合作\n7. 禁止出现任何项目符号、特殊符号、Markdown符号 如：###、**、-等\n8. 将话术中所有出现的你改为您",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "rnwjrpJfE6aH",
      "name": "记录对话论数",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -1341.388587564118,
        "y": -3401.660088177884
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "valueType": "string"
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1}){\n   if (data1 === null || data1 === undefined || data1 === '') {\n  data1 = 1;\n} else {\n  data1 = data1+1;\n}\n    return {\n        result: data1\n    }\n}\n",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "valueType": "string"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "dialogueCount"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "number",
          "label": "result",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "nwPJXGoYdE05",
      "name": "计数更新",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": -663.3885875641181,
        "y": -3139.160088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "dialogueCount"
              ],
              "value": [
                "rnwjrpJfE6aH",
                "qLUQfhG0ILRX"
              ],
              "valueType": "any",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "wNuXxATuX5xq",
      "name": "workflow:question_classification",
      "intro": "workflow:intro_question_classification",
      "avatar": "core/workflow/template/questionClassify",
      "flowNodeType": "classifyQuestion",
      "showStatus": true,
      "position": {
        "x": 1379.611412435882,
        "y": -4198.160088177884
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "selectLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "required": true,
          "valueType": "string",
          "llmModelType": "classify",
          "value": "gpt-4.1",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "core.module.input.label.Background",
          "description": "core.module.input.description.Background",
          "placeholder": "core.module.input.placeholder.Classify background",
          "value": "\n1.要项目相关资料：当客户询问是否有资料时，归为此分类；\n2.聊项目、大会相关内容，各种疑问及其他：当客户问行业，项目、大会的具体问题或是让介绍项目、大会时或与项目大会都无关的内容，各种疑问归为此类；注意，若用户直接说“帮我推荐下项目”时，归为第5类——「要求推荐项目」\n3.辱骂、骚扰、厌烦：当客户进行语言攻击，辱骂、骚扰时归为此类；（注意，当客户的信息包含“负面”或“负面舆情、负面信息、负面言论”等类似词汇时，虽然需要结合语境综合分析问题分类，但可考虑优先分类为该类型）\n4.肯定回答：当客户回复好、可以等这样的回答归为此类；\n5.要求推荐：当客户询问有什么赚钱的、好的、新的项目时，或者，直接说“帮我推荐下项目”时，等归为此类；",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户输入的问题（问题需要完善）",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "agents",
          "value": [
            {
              "value": "要项目相关资料",
              "key": "wqre"
            },
            {
              "value": "聊项目、大会相关内容，各种疑问及其他",
              "key": "sdfa"
            },
            {
              "value": "辱骂、骚扰、厌烦",
              "key": "jAHIz73GtWUv"
            },
            {
              "value": "肯定回答",
              "key": "kHYT4lUV2MaG"
            },
            {
              "value": "要求推荐",
              "key": "hT2o927WkfiEespn"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "cqResult",
          "key": "cqResult",
          "required": true,
          "label": "workflow:classification_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "hVce85CWE3zp",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "项目列表库搜索",
      "intro": "workflow:template.dataset_search_intro",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 4337.20998266419,
        "y": -5239.7010346985535
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "common:core.module.input.label.Select dataset",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "{\n  datasetId: string;\n}[]",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.55,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 9700,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "embedding",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "embeddingWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "gpt-4o",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "需要检索的内容",
          "required": true,
          "value": [
            "fQPDvwr6U4fi",
            "loopStartInput"
          ],
          "debugLabel": ""
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "workflow:collection_metadata_filter",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "dkGlTVzLIcv9",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "判断器#2",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 5035.20998266419,
        "y": -5062.2010346985535
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "hVce85CWE3zp",
                    "quoteQA"
                  ],
                  "condition": "isEmpty"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "azV2kbvbYuez",
      "name": "指定回复#3",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 8815.611412435883,
        "y": -5770.910088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "%*%4$*${{$VARIABLE_NODE_ID.projectName$}}$*$您可以看下这份资料，里面有{{$VARIABLE_NODE_ID.projectName$}}的详细介绍\n",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "tFcqTpLIhvsi",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "workflow:text_content_extraction",
      "intro": "workflow:intro_text_content_extraction",
      "avatar": "core/workflow/template/extractJson",
      "flowNodeType": "contentExtract",
      "showStatus": true,
      "position": {
        "x": 5825.209982664191,
        "y": -5306.2010346985535
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "selectLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "required": true,
          "valueType": "string",
          "llmModelType": "extractFields",
          "value": "gpt-4o-mini",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "description",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "string",
          "label": "workflow:extraction_requirements_description",
          "description": "workflow:extraction_requirements_description_detail",
          "placeholder": "workflow:extraction_requirements_placeholder",
          "debugLabel": "",
          "toolDescription": "",
          "selectedTypeIndex": 1
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 0,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "content",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "label": "workflow:text_to_extract",
          "required": true,
          "valueType": "string",
          "toolDescription": "需要检索的内容",
          "value": "{{$hVce85CWE3zp.quoteQA$}}",
          "selectedTypeIndex": 1,
          "debugLabel": ""
        },
        {
          "key": "extractKeys",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "any",
          "description": "workflow:target_fields_description",
          "value": [
            {
              "valueType": "string",
              "required": false,
              "defaultValue": "漂亮妈妈",
              "desc": "问题",
              "key": "q",
              "enum": ""
            }
          ],
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "success",
          "key": "success",
          "label": "workflow:full_field_extraction",
          "required": true,
          "description": "提取字段全部填充时返回 true （模型提取或使用默认值均属于成功）",
          "valueType": "boolean",
          "type": "static"
        },
        {
          "id": "fields",
          "key": "fields",
          "label": "workflow:complete_extraction_result",
          "required": true,
          "description": "一个 JSON 字符串，例如：{\"name:\":\"YY\",\"Time\":\"2023/7/2 18:00\"}",
          "valueType": "string",
          "type": "static"
        }
      ]
    },
    {
      "nodeId": "c0bYEbxvrcCk",
      "name": "高意向-GTXM",
      "intro": "可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）",
      "avatar": "core/workflow/template/httpRequest",
      "flowNodeType": "httpRequest468",
      "showStatus": true,
      "position": {
        "x": 8839.611412435883,
        "y": -5303.410088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "common:core.module.input.description.HTTP Dynamic Input",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpMethod",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "string",
          "label": "",
          "value": "POST",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpTimeout",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "number",
          "label": "",
          "value": 30,
          "min": 5,
          "max": 600,
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpReqUrl",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "",
          "description": "common:core.module.input.description.Http Request Url",
          "placeholder": "https://api.ai.com/getInventory",
          "required": false,
          "value": "https://lbb-gw.tojoycloud.com/tbh-intelligence/chat/intention",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpHeader",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "value": [
            {
              "key": "token",
              "type": "string",
              "value": "oniomixydzvutdxqkvwcumnitrzwfvbl"
            },
            {
              "key": "Content-Type",
              "type": "string",
              "value": "application/json;charset=utf-8"
            }
          ],
          "label": "",
          "description": "common:core.module.input.description.Http Request Header",
          "placeholder": "common:core.module.input.description.Http Request Header",
          "required": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpParams",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpJsonBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": " {\r\n    \"user\": \"{{accountNo}}\",  \r\n     \"nickName\":\"{{nickName}}\",\n     \"userNickId\":\"{{accountWxid}}\",\n     \"nickId\":\"{{nickId}}\",\n     \"actionCode\":\"GTXM\",\n     \"materialType\":\"\",\n     \"materialName\":\"\"\n\r\n  }",
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpFormBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpContentType",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "value": "json",
          "label": "",
          "required": false,
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "error",
          "key": "error",
          "label": "workflow:request_error",
          "description": "HTTP请求错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "httpRawResponse",
          "key": "httpRawResponse",
          "required": true,
          "label": "workflow:raw_response",
          "description": "HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。",
          "valueType": "any",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "输出字段提取",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "可以通过 JSONPath 语法来提取响应值中的指定字段",
          "valueDesc": ""
        }
      ]
    },
    {
      "nodeId": "zkTTthv5ESTI",
      "name": "提取客户对话",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 2250.611412435882,
        "y": -5415.660088177884
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "valueType": "string"
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "value": "function main({data1,data2}){\n     const humanContents = [];\n    // 遍历 data1 数组\n    for (let i = 0; i < data1.length; i++) {\n        const item = data1[i];\n        // 检查 obj 是否为 \"Human\" 且相关属性存在\n        if (item.obj === \"Human\") {\n            humanContents.push(item.value[0].text.content);\n        }\n    }\n    // 将 query1 插入到数组的最后一个位置\n    humanContents.push(data2);\n    // 对数组进行倒序\n    //humanContents.reverse();\n    return {concatenatedResult: humanContents}\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": "",
          "valueType": "string"
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "arrayObject",
          "canEdit": true,
          "key": "data1",
          "label": "data1",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            [
              "VARIABLE_NODE_ID",
              "histories"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data2",
          "label": "data2",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ]
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "concatenatedResult",
          "valueType": "string",
          "label": "concatenatedResult",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ldqeU1xzik0X",
      "name": "变量更新#2",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 2939.611412435882,
        "y": -5212.160088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "dialoguesArr"
              ],
              "value": [
                [
                  "zkTTthv5ESTI",
                  "qLUQfhG0ILRX"
                ]
              ],
              "valueType": "arrayString",
              "renderType": "reference"
            },
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "projectName"
              ],
              "value": [
                "",
                "0"
              ],
              "renderType": "input",
              "valueType": "string"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "g51Bn8L1yqRo",
      "name": "批量执行",
      "intro": "输入一个数组，遍历数组并将每一个数组元素作为输入元素，执行工作流。",
      "avatar": "core/workflow/template/loop",
      "flowNodeType": "loop",
      "showStatus": true,
      "position": {
        "x": 3727,
        "y": -5636
      },
      "version": "4811",
      "inputs": [
        {
          "key": "loopInputArray",
          "renderTypeList": [
            "reference"
          ],
          "valueType": "arrayString",
          "required": true,
          "label": "数组",
          "value": [
            [
              "VARIABLE_NODE_ID",
              "dialoguesArr"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "childrenNodeIdList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "arrayString",
          "label": "",
          "value": [
            "hVce85CWE3zp",
            "dkGlTVzLIcv9",
            "tFcqTpLIhvsi",
            "fQPDvwr6U4fi",
            "jQIsvimP2gn6",
            "zBElzg1qdMBBvZSV",
            "f4ONvBfsTMxJjESh"
          ]
        },
        {
          "key": "nodeWidth",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "number",
          "label": "",
          "value": 4108
        },
        {
          "key": "nodeHeight",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "number",
          "label": "",
          "value": 961
        },
        {
          "key": "loopNodeInputHeight",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "number",
          "label": "",
          "value": 83,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "loopArray",
          "key": "loopArray",
          "label": "workflow:loop_result",
          "type": "static",
          "valueType": "arrayString",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "fQPDvwr6U4fi",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "开始",
      "avatar": "core/workflow/template/loopStart",
      "flowNodeType": "loopStart",
      "showStatus": false,
      "position": {
        "x": 3797.20998266419,
        "y": -4996.2010346985535
      },
      "version": "4811",
      "inputs": [
        {
          "key": "loopStartInput",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "required": true,
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "loopStartIndex",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "number",
          "label": "workflow:Array_element_index",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "loopStartIndex",
          "key": "loopStartIndex",
          "label": "workflow:Array_element_index",
          "type": "static",
          "valueType": "number",
          "description": ""
        },
        {
          "id": "loopStartInput",
          "key": "loopStartInput",
          "label": "数组元素",
          "type": "static",
          "valueType": "string"
        }
      ]
    },
    {
      "nodeId": "jQIsvimP2gn6",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "结束",
      "avatar": "core/workflow/template/loopEnd",
      "flowNodeType": "loopEnd",
      "showStatus": false,
      "position": {
        "x": 7405.209982664191,
        "y": -4950.2010346985535
      },
      "version": "4811",
      "inputs": [
        {
          "key": "loopEndInput",
          "renderTypeList": [
            "reference"
          ],
          "valueType": "any",
          "label": "",
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "projectName"
          ],
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "ihqM5pk7kYAW",
      "name": "判断器#4",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 8013.611412435882,
        "y": -5265.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "projectName"
                  ],
                  "condition": "equalTo",
                  "value": "0"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "projectName"
                  ],
                  "condition": "isNotEmpty"
                },
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "projectName"
                  ],
                  "condition": "notEqual",
                  "value": "0"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "lzWFvVzSC9LK",
      "name": "激活或测试#5",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": -2276.388587564118,
        "y": -2699.160088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "OR",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "processType"
                  ],
                  "condition": "equalTo",
                  "value": "activation"
                },
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "processType"
                  ],
                  "condition": "equalTo",
                  "value": "greet"
                },
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "processType"
                  ],
                  "condition": "equalTo",
                  "value": "callBack"
                }
              ]
            },
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "processType"
                  ],
                  "condition": "equalTo",
                  "value": "test"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "sFHNLWjiPXG1",
      "name": "调通测试#3",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": -1474.388587564118,
        "y": -2520.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "1",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "vtGgI1kzNsOz",
      "name": "变量更新#4",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": -688.3885875641181,
        "y": -2365.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "processType"
              ],
              "value": [
                "",
                "null"
              ],
              "valueType": "string",
              "renderType": "input"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "znqFzRFbSt9C",
      "name": "流程等待",
      "intro": "让工作流等待指定时间后运行",
      "avatar": "core/workflow/template/sleep",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": -2920.388587564118,
        "y": -2590.160088177884
      },
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "延迟时长",
          "label": "延迟时长",
          "description": "需要暂停的时间，单位毫秒",
          "defaultValue": 1000,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": true,
          "toolDescription": "需要暂停的时间，单位毫秒",
          "max": 300000,
          "min": 1,
          "value": 2000,
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "result",
          "type": "static",
          "key": "result",
          "valueType": "any",
          "label": "result",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "community-delay"
    },
    {
      "nodeId": "rwg5bEtZ9SgQ",
      "name": "判断器#5",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 8821.611412435883,
        "y": -4395.410088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "confirmAgain"
                  ],
                  "condition": "equalTo",
                  "value": "0"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "ckmT4dbDfiDU",
      "name": "workflow:template.ai_chat",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 9601.611412435883,
        "y": -5280.910088177884
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 1,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n你是一位资深销售，可以很好的应对客户的问题，由于你不知道客户在问什么项目，请用简短的口语方式，让客户再说一下问的是那个项目。\n将话术中所有出现的你改为您\n\n",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "aEcNlABa4Z4N",
      "name": "workflow:template.ai_chat",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 9601.611412435883,
        "y": -4154.910088177884
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 1,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n你是一位资深销售，可以很好的应对客户的问题，由于你还是不知道客户在问的项目，请用简短的口语方式跟客户说，一会儿电话联系客户。\n将话术中所有出现的你改为您",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "tTaedrk67ylJ",
      "name": "变量更新#5",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 10387.611412435883,
        "y": -4925.910088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "confirmAgain"
              ],
              "value": [
                "",
                "1"
              ],
              "valueType": "string",
              "renderType": "input"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "yDO586wQ8hbr",
      "name": "变量更新#5",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 10387.611412435883,
        "y": -3820.910088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "confirmAgain"
              ],
              "value": [
                "",
                "0"
              ],
              "valueType": "string",
              "renderType": "input"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "wjQPQH188Dmn",
      "name": "AI 负面 没有 ",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 5477.611412435882,
        "y": 997.5899118221159
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 1,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n你是一位资深销售，需要处理客户发送的负面信息。当用户发送包含辱骂、骚扰或表达强烈厌烦情绪的内容时，请按照以下规则回应：  \n\t1. 主要目标：用口语化表达化解冲突，避免激化矛盾  \n2. 适用场景：用户消息包含以下任意特征时触发  \n  \t - 辱骂：包含人身攻击或侮辱性语言（如\"蠢货\"、\"骗子\"）  \n   \t- 骚扰：重复发送无关内容或性暗示  \n   \t- 厌烦：明确表示\"滚开\"、\"别烦我\"等拒绝沟通  \n回应模板示例：\n[辱骂情况]\n嗯，理解，抱歉打扰到您了，有需要咱随时联系。\n\n[骚扰情况] \n您刚才的玩笑话，我就当是长辈对小辈的关心啦~ 您看咱聊聊您感兴趣的项目呀。\n\n[厌烦情况]\n抱歉打扰到您了，有需要咱随时联系。\n\n将话术中所有出现的你改为您",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "vayWGgFNEx7q",
      "name": "负面信息#2",
      "intro": "可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）",
      "avatar": "core/workflow/template/httpRequest",
      "flowNodeType": "httpRequest468",
      "showStatus": true,
      "position": {
        "x": 2183.611412435882,
        "y": -4443.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "common:core.module.input.description.HTTP Dynamic Input",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpMethod",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "string",
          "label": "",
          "value": "POST",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpTimeout",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "number",
          "label": "",
          "value": 30,
          "min": 5,
          "max": 600,
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpReqUrl",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "",
          "description": "common:core.module.input.description.Http Request Url",
          "placeholder": "https://api.ai.com/getInventory",
          "required": false,
          "value": "https://lbb-gw.tojoycloud.com/tbh-intelligence/chat/emotion",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpHeader",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "value": [
            {
              "key": "token",
              "type": "string",
              "value": "oniomixydzvutdxqkvwcumnitrzwfvbl"
            },
            {
              "key": "Content-Type",
              "type": "string",
              "value": "application/json;charset=utf-8"
            }
          ],
          "label": "",
          "description": "common:core.module.input.description.Http Request Header",
          "placeholder": "common:core.module.input.description.Http Request Header",
          "required": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpParams",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpJsonBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": " {\r\n     \"user\": \"{{accountNo}}\",  \n     \"nickName\":\"{{nickName}}\",\n     \"userNickId\":\"{{accountWxid}}\",\n     \"nickId\":\"{{nickId}}\",\n     \"actionCode\":\"SYXMZL\",\n     \"materialType\":\"\",\n     \"materialName\":\"\"\n\n\r\n  }",
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpFormBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpContentType",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "value": "json",
          "label": "",
          "required": false,
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "error",
          "key": "error",
          "label": "workflow:request_error",
          "description": "HTTP请求错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "httpRawResponse",
          "key": "httpRawResponse",
          "required": true,
          "label": "workflow:raw_response",
          "description": "HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。",
          "valueType": "any",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "输出字段提取",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "可以通过 JSONPath 语法来提取响应值中的指定字段",
          "valueDesc": ""
        }
      ]
    },
    {
      "nodeId": "vd3nDoJ6eQT5",
      "name": "负面知识库搜索",
      "intro": "workflow:template.dataset_search_intro",
      "avatar": "core/workflow/template/datasetSearch",
      "flowNodeType": "datasetSearchNode",
      "showStatus": true,
      "position": {
        "x": 2203.611412435882,
        "y": -17.910088177884063
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "datasets",
          "renderTypeList": [
            "selectDataset",
            "reference"
          ],
          "label": "common:core.module.input.label.Select dataset",
          "value": [],
          "valueType": "selectDataset",
          "required": true,
          "valueDesc": "{\n  datasetId: string;\n}[]",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "similarity",
          "renderTypeList": [
            "selectDatasetParamsModal"
          ],
          "label": "",
          "value": 0.5,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "limit",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": 1500,
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "searchMode",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "mixedRecall",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "embeddingWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "usingReRank",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "gpt-4o",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "rerankWeight",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0.5,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchUsingExtensionQuery",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionModel",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "gpt-4.1",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "datasetSearchExtensionBg",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "关于公司负面信息等问题",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "authTmbId",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "需要检索的内容",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        },
        {
          "key": "collectionFilterMatch",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "label": "workflow:collection_metadata_filter",
          "valueType": "string",
          "isPro": true,
          "description": "workflow:filter_description",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "quoteQA",
          "key": "quoteQA",
          "label": "common:core.module.Dataset quote.label",
          "description": "特殊数组格式，搜索结果为空时，返回空数组。",
          "type": "static",
          "valueType": "datasetQuote",
          "valueDesc": "{\n  id: string;\n  datasetId: string;\n  collectionId: string;\n  sourceName: string;\n  sourceId?: string;\n  q: string;\n  a: string\n}[]"
        }
      ]
    },
    {
      "nodeId": "iOTQB7O5REM7",
      "name": "判断器#6",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 2946.611412435882,
        "y": 159.58991182211594
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "x64jvTq8s2qT",
                    "quoteQA"
                  ],
                  "condition": "isNotEmpty"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "cg1IncFagE5I",
      "name": "AI 负面 有 回复",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 5538.611412435882,
        "y": -218.41008817788406
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 0,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n1. 用口语化的表达方式运用知识库的引用内容进行回复\n2. 回答控制在100字以内\n3. 禁止出现以下内容：  \n   - \"根据知识库\"、\"如文档所述\"等引用提示  \n   - “我们的项目”\n   - “投资”\n   - \"您还有其他问题吗？\"等客服话术  \n4. 所有项目要说我们加速孵化的项目\n5. 你在微信中与客户沟通\n6. 将话术中所有出现的投资改为合作\n7. 禁止出现任何项目符号、特殊符号、Markdown符号 如：###、**、-等\n8. 将话术中所有出现的你改为您",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "value": [
            "vd3nDoJ6eQT5",
            "quoteQA"
          ],
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "eAW42fKc7QKM",
      "name": "变量更新#8",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": -2124.888587564118,
        "y": -1979.160088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "currentDate"
              ],
              "value": [
                "f9lH2t9V1nyfWq26",
                "time"
              ],
              "valueType": "string",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "zBElzg1qdMBBvZSV",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "代码运行#4",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 6380.209982664191,
        "y": -5312.7010346985535
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main({jsonData}){\n    try {\n        const parsedData = typeof jsonData === 'string' ? JSON.parse(jsonData) : jsonData;\n        return {\n            result: parsedData.q\n        }\n    } catch (error) {\n        console.error('解析 JSON 时出错:', error);\n        return null;\n    }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "jsonData",
          "label": "jsonData",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "tFcqTpLIhvsi",
            "fields"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "data2",
          "label": "data2",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "projectName"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "ocrupDeUjxaTeBes",
          "valueType": "string",
          "type": "dynamic",
          "key": "result",
          "label": "result"
        }
      ]
    },
    {
      "nodeId": "f4ONvBfsTMxJjESh",
      "parentNodeId": "g51Bn8L1yqRo",
      "name": "变量更新#9",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 6900.209982664191,
        "y": -5010.2010346985535
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "projectName"
              ],
              "value": [
                "zBElzg1qdMBBvZSV",
                "ocrupDeUjxaTeBes"
              ],
              "valueType": "string",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "xnFSVwiYPfDzSfUy",
      "name": "高意向-SYXMZL",
      "intro": "可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）",
      "avatar": "core/workflow/template/httpRequest",
      "flowNodeType": "httpRequest468",
      "showStatus": true,
      "position": {
        "x": 8045.611412435882,
        "y": -3248.910088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "common:core.module.input.description.HTTP Dynamic Input",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpMethod",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "string",
          "label": "",
          "value": "POST",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpTimeout",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "number",
          "label": "",
          "value": 30,
          "min": 5,
          "max": 600,
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpReqUrl",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "",
          "description": "common:core.module.input.description.Http Request Url",
          "placeholder": "https://api.ai.com/getInventory",
          "required": false,
          "value": "https://lbb-gw.tojoycloud.com/tbh-intelligence/chat/intention",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpHeader",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "value": [
            {
              "key": "token",
              "type": "string",
              "value": "oniomixydzvutdxqkvwcumnitrzwfvbl"
            },
            {
              "key": "Content-Type",
              "type": "string",
              "value": "application/json;charset=utf-8"
            }
          ],
          "label": "",
          "description": "common:core.module.input.description.Http Request Header",
          "placeholder": "common:core.module.input.description.Http Request Header",
          "required": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpParams",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpJsonBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": " {\n     \"user\": \"{{accountNo}}\",  \n     \"nickName\":\"{{nickName}}\",\n     \"userNickId\":\"{{accountWxid}}\",\n     \"nickId\":\"{{nickId}}\",\n     \"actionCode\":\"SYXMZL\",\n     \"materialType\":\"4\",\n     \"materialName\":\"{{projectName}}\"\n  }",
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpFormBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpContentType",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "value": "json",
          "label": "",
          "required": false,
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "error",
          "key": "error",
          "label": "workflow:request_error",
          "description": "HTTP请求错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "httpRawResponse",
          "key": "httpRawResponse",
          "required": true,
          "label": "workflow:raw_response",
          "description": "HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。",
          "valueType": "any",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "输出字段提取",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "可以通过 JSONPath 语法来提取响应值中的指定字段",
          "valueDesc": ""
        }
      ]
    },
    {
      "nodeId": "bX87cG1a64mOeaSD",
      "name": "高意向-JHHHF",
      "intro": "可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）",
      "avatar": "core/workflow/template/httpRequest",
      "flowNodeType": "httpRequest468",
      "showStatus": true,
      "position": {
        "x": 8839.611412435883,
        "y": -3575.410088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "common:core.module.input.description.HTTP Dynamic Input",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpMethod",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "string",
          "label": "",
          "value": "POST",
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpTimeout",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "number",
          "label": "",
          "value": 30,
          "min": 5,
          "max": 600,
          "required": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpReqUrl",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "",
          "description": "common:core.module.input.description.Http Request Url",
          "placeholder": "https://api.ai.com/getInventory",
          "required": false,
          "value": "https://lbb-gw.tojoycloud.com/tbh-intelligence/chat/intention",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpHeader",
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "value": [
            {
              "key": "token",
              "type": "string",
              "value": "oniomixydzvutdxqkvwcumnitrzwfvbl"
            },
            {
              "key": "Content-Type",
              "type": "string",
              "value": "application/json;charset=utf-8"
            }
          ],
          "label": "",
          "description": "common:core.module.input.description.Http Request Header",
          "placeholder": "common:core.module.input.description.Http Request Header",
          "required": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpParams",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpJsonBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": " {\r\n    \"user\": \"{{accountNo}}\",  \r\n     \"nickName\":\"{{nickName}}\",\n     \"userNickId\":\"{{accountWxid}}\",\n     \"nickId\":\"{{nickId}}\",\n     \"actionCode\":\"JHHHF\",\n     \"materialType\":\"\",\n     \"materialName\":\"\"\n\r\n  }",
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpFormBody",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "value": [],
          "label": "",
          "required": false,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "system_httpContentType",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "value": "json",
          "label": "",
          "required": false,
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "error",
          "key": "error",
          "label": "workflow:request_error",
          "description": "HTTP请求错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "httpRawResponse",
          "key": "httpRawResponse",
          "required": true,
          "label": "workflow:raw_response",
          "description": "HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。",
          "valueType": "any",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "输出字段提取",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectApp",
              "selectDataset"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "可以通过 JSONPath 语法来提取响应值中的指定字段",
          "valueDesc": ""
        }
      ]
    },
    {
      "nodeId": "ykAWqAQpDMMbHVvg",
      "name": "提取项目名称",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -2858.388587564118,
        "y": -1598.160088177884
      },
      "version": "482",
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main({jsonData}) {\n    try {\n        // 第一步：处理转义的引号，把 \\\" 转换为 \"\n        const unescapedJson = jsonData.replace(/\\\\\"/g, '\"');\n        \n        // 第二步：移除字符串开头和结尾的额外引号\n        const rawJsonString = unescapedJson.replace(/^\"|\"$/g, '');\n        \n        // 第三步：解析处理后的 JSON 字符串\n        const parsedArray = JSON.parse(rawJsonString);\n        \n        // 第四步：提取 projectName 并拼接成字符串\n        const projectNames = parsedArray.map(item => item.projectName).join('，');\n        \n        return {\n            result: projectNames\n        };\n    } catch (error) {\n        console.error('JSON 解析出错:', error);\n        return {\n            error: 'JSON 格式不正确'\n        };\n    }\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "jsonData",
          "label": "jsonData",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "project"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "workflow:full_response_data",
          "valueType": "object",
          "type": "static",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "workflow:execution_error",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static"
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "ocrupDeUjxaTeBes",
          "valueType": "string",
          "type": "dynamic",
          "key": "result",
          "label": "result"
        }
      ]
    },
    {
      "nodeId": "o5pKYgQwFmMY4EJC",
      "name": "项目推荐回答",
      "intro": "workflow:template.ai_chat_intro",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 3001.611412435882,
        "y": -1176.910088177884
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 1,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "value": 8000,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": true,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n跟据{{$VARIABLE_NODE_ID.projectStr$}}这里面的项目进行回答\n1. 用口语化的表达方式进行回复\n2. 回答控制在100字以内\n3. 禁止出现以下内容：  \n   - \"根据知识库\"、\"如文档所述\"等引用提示  \n   - “我们的项目”\n   - “投资”、“挣钱”、“保本”、“保收益”、“保盈利”\n   - \"您还有其他问题吗？\"等客服话术  \n   - “加微信”，\"发您邮箱“\n   - “不知道”、“不清楚”\n4. 所有项目要说我们加速孵化的项目\n5. 你在微信中与客户沟通\n6. 将话术中所有出现的投资改为合作\n7. 禁止出现任何项目符号、特殊符号、Markdown符号 如：###、**、-等\n8. 将话术中所有出现的你改为您",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "nWHcHPDeFOjZKz34",
      "name": "变量更新#8",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": -2158.388587564118,
        "y": -1365.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "projectStr"
              ],
              "value": [
                "",
                "{{$ykAWqAQpDMMbHVvg.ocrupDeUjxaTeBes$}}"
              ],
              "valueType": "string",
              "renderType": "input"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "cas2KPhA7XTvxYaP",
      "name": "判断主推项目是否为空",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 2165.611412435882,
        "y": -808.9100881778841
      },
      "version": "481",
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "VARIABLE_NODE_ID",
                    "projectStr"
                  ],
                  "condition": "isEmpty"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "workflow:judgment_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "pnE1bYcAbiJ78vRc",
      "name": "直接回复",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": -1474.388587564118,
        "y": -2157.660088177884
      },
      "version": "481",
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "回复的内容",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": " {{$448745.userChatInput$}}",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "bBOHTNOPHJKF2JYk",
      "name": "AI 项目及其他知识库有回答",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 8082.611412435882,
        "y": -1124.910088177884
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "AI 模型",
          "valueType": "string",
          "value": "Doubao-1.5-pro-32k",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": true,
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "提示词",
          "description": "core.app.tip.systemPromptTip",
          "placeholder": "core.app.tip.chatNodeSystemPromptTip",
          "value": "##角色设定\n{{$VARIABLE_NODE_ID.role$}}\n\n##核心任务\n1. 用口语化的表达方式运用知识库的引用内容进行回复\n2. 回答控制在100字以内\n3. 禁止出现以下内容：\n   - \"根据知识库\"、\"如文档所述\"等引用提示  \n   - “我们的项目”\n   - “投资”、“挣钱”、“保本”、“保收益”、“保盈利”\n   - \"您还有其他问题吗？\"等客服话术  \n   - \"发您邮箱“\n4. 所有项目要说我们加速孵化的项目\n5. 你在微信中与客户沟通\n6. 将话术中所有出现的投资改为合作\n7. 禁止出现任何项目符号、特殊符号、Markdown符号 如：###、**、-等\n8. 将话术中所有出现的你改为您",
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "聊天记录",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "description": "",
          "valueType": "datasetQuote",
          "value": [
            "dT1wVEwObdVg",
            "quoteQA"
          ],
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "文件链接",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "valueDesc": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "用户问题",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static"
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": true,
          "description": ""
        }
      ]
    },
    {
      "nodeId": "yo0TQ64kIto5iJYE",
      "name": "高意向判定推送",
      "intro": "workflow:intro_question_classification",
      "avatar": "core/workflow/template/questionClassify",
      "flowNodeType": "classifyQuestion",
      "showStatus": true,
      "position": {
        "x": 8021.611412435882,
        "y": -4361.910088177884
      },
      "version": "4.9.2",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "selectLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "required": true,
          "valueType": "string",
          "llmModelType": "classify",
          "value": "gpt-4o-mini",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "core.module.input.label.Background",
          "description": "core.module.input.description.Background",
          "placeholder": "core.module.input.placeholder.Classify background",
          "value": "1.聊项目、大会相，各种疑问，让介绍的：当客户问行业，项目、大会的问题或是让介绍项目、大会时或各种疑问归为此类；\n2.肯定回答：当客户回复好、可以等这样的回答归为此类；\n3.其他：除上述两种类型之外的归为此类",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 10,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户输入的问题（问题需要完善）",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "custom"
          ],
          "valueType": "any",
          "label": "",
          "debugLabel": "",
          "toolDescription": "",
          "key": "agents",
          "value": [
            {
              "value": "聊项目、大会，各种疑问，让介绍的",
              "key": "wqre"
            },
            {
              "value": "肯定回答",
              "key": "sdfa"
            },
            {
              "value": "其他",
              "key": "jAHIz73GtWUv"
            }
          ]
        }
      ],
      "outputs": [
        {
          "id": "cqResult",
          "key": "cqResult",
          "required": true,
          "label": "workflow:classification_result",
          "valueType": "string",
          "type": "static",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "f9lH2t9V1nyfWq26",
      "name": "获取当前时间",
      "intro": "获取用户当前时区的时间。",
      "avatar": "core/workflow/template/getTime",
      "flowNodeType": "pluginModule",
      "showStatus": false,
      "position": {
        "x": -2800.388587564118,
        "y": -2019.98919311659
      },
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "time",
          "type": "static",
          "key": "time",
          "valueType": "string",
          "label": "time",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "community-getTime"
    },
    {
      "nodeId": "k2GVkiLq4s6frmgR",
      "name": "增强回复3.0版本",
      "intro": "",
      "avatar": "core/app/type/pluginFill",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 8886.611412435883,
        "y": -2031.410088177884
      },
      "version": "",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "origiResponse",
          "label": "origiResponse",
          "description": "回复长文本",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "回复长文本",
          "value": [
            "a5uiaEgOM4WO",
            "answerText"
          ],
          "valueDesc": "",
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "SegmentLength",
          "label": "SegmentLength",
          "description": "输入文本切分长度",
          "defaultValue": 25,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "输入文本切分长度",
          "value": 100,
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "outputText",
          "type": "static",
          "key": "outputText",
          "valueType": "arrayString",
          "label": "outputText",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "682a7a69a62633d03c948f6f"
    },
    {
      "nodeId": "iZc3eGlr3ChZyAUk",
      "name": "增强回复3.0版本#2",
      "intro": "",
      "avatar": "core/app/type/pluginFill",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 8886.611412435883,
        "y": -815.4100881778841
      },
      "version": "",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "origiResponse",
          "label": "origiResponse",
          "description": "回复长文本",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "回复长文本",
          "value": [
            "bBOHTNOPHJKF2JYk",
            "answerText"
          ],
          "valueDesc": "",
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "SegmentLength",
          "label": "SegmentLength",
          "description": "输入文本切分长度",
          "defaultValue": 25,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "输入文本切分长度",
          "value": 100,
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "outputText",
          "type": "static",
          "key": "outputText",
          "valueType": "arrayString",
          "label": "outputText",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "682a7a69a62633d03c948f6f"
    },
    {
      "nodeId": "lnXQqB0i9ggATU6F",
      "name": "增强回复3.0版本#3",
      "intro": "",
      "avatar": "core/app/type/pluginFill",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 8092.611412435882,
        "y": 91.08991182211594
      },
      "version": "",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "origiResponse",
          "label": "origiResponse",
          "description": "回复长文本",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "回复长文本",
          "value": [
            "cg1IncFagE5I",
            "answerText"
          ],
          "valueDesc": "",
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "SegmentLength",
          "label": "SegmentLength",
          "description": "输入文本切分长度",
          "defaultValue": 25,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "输入文本切分长度",
          "value": 100,
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "outputText",
          "type": "static",
          "key": "outputText",
          "valueType": "arrayString",
          "label": "outputText",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "682a7a69a62633d03c948f6f"
    },
    {
      "nodeId": "cyKM3pSeUJIzKzFB",
      "name": "增强回复3.0版本#4",
      "intro": "",
      "avatar": "core/app/type/pluginFill",
      "flowNodeType": "pluginModule",
      "showStatus": true,
      "position": {
        "x": 8092.611412435882,
        "y": 1283.089911822116
      },
      "version": "",
      "inputs": [
        {
          "key": "system_forbid_stream",
          "renderTypeList": [
            "switch"
          ],
          "valueType": "boolean",
          "label": "禁用流输出",
          "description": "强制设置嵌套运行的应用，均以非流模式运行",
          "value": false,
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "string",
          "canEdit": false,
          "key": "origiResponse",
          "label": "origiResponse",
          "description": "回复长文本",
          "defaultValue": "",
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "回复长文本",
          "value": [
            "wjQPQH188Dmn",
            "answerText"
          ],
          "valueDesc": "",
          "debugLabel": ""
        },
        {
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "selectedTypeIndex": 0,
          "valueType": "number",
          "canEdit": false,
          "key": "SegmentLength",
          "label": "SegmentLength",
          "description": "输入文本切分长度",
          "defaultValue": 25,
          "list": [
            {
              "label": "",
              "value": ""
            }
          ],
          "maxFiles": 5,
          "canSelectFile": true,
          "canSelectImg": true,
          "required": false,
          "toolDescription": "输入文本切分长度",
          "value": 100,
          "valueDesc": "",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "outputText",
          "type": "static",
          "key": "outputText",
          "valueType": "arrayString",
          "label": "outputText",
          "description": "",
          "valueDesc": ""
        }
      ],
      "pluginId": "682a7a69a62633d03c948f6f"
    },
    {
      "nodeId": "eIIzZvCz1WSHmlCX",
      "name": "判断器#8",
      "intro": "根据一定的条件，执行不同的分支。",
      "avatar": "core/workflow/template/ifelse",
      "flowNodeType": "ifElseNode",
      "showStatus": true,
      "position": {
        "x": 642.9213420788847,
        "y": -3180.1319127557927
      },
      "inputs": [
        {
          "key": "ifElseList",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": [
            {
              "condition": "AND",
              "list": [
                {
                  "variable": [
                    "dkmqUNUovXQPNC7T",
                    "qLUQfhG0ILRX"
                  ],
                  "condition": "equalTo",
                  "value": "true"
                }
              ]
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "ifElseResult",
          "key": "ifElseResult",
          "label": "判断结果",
          "valueType": "string",
          "type": "static",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "q34qp7W7TkfMUijE",
      "name": "流程暂停",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 1557.648897637054,
        "y": -2788.9482477213073
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "workflow:these_variables_will_be_input_parameters_for_code_execution",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main() {\n  // 这是一个空操作节点，不执行任何实际功能\n  return { completed: true };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "result",
          "valueType": "string",
          "label": "result",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "gR0mkQpJ4Og8",
          "type": "dynamic",
          "key": "data2",
          "valueType": "string",
          "label": "data2",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dXhBdHFIEX2vCaIO",
      "name": "变量更新#9",
      "intro": "可以更新指定节点的输出值或更新全局变量",
      "avatar": "core/workflow/template/variableUpdate",
      "flowNodeType": "variableUpdate",
      "showStatus": false,
      "position": {
        "x": 1311.236887133891,
        "y": -1823.9320355613277
      },
      "inputs": [
        {
          "key": "updateList",
          "valueType": "any",
          "label": "",
          "renderTypeList": [
            "hidden"
          ],
          "value": [
            {
              "variable": [
                "VARIABLE_NODE_ID",
                "lastTime"
              ],
              "value": [
                "oOC8eGIVy7BX6HLx",
                "qLUQfhG0ILRX"
              ],
              "valueType": "number",
              "renderType": "reference"
            }
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "oOC8eGIVy7BX6HLx",
      "name": "代码运行#6",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": 729.2490642272,
        "y": -2004.411253150505
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "这些变量会作为代码的运行的输入参数",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main() {\n    // 获取当前时间戳（毫秒）\n    const timestamp = new Date().getTime();\n    \n    return {\n        timestamp\n    };\n} ",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "timestamp",
          "valueType": "number",
          "label": "timestamp",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "yVnZRa0Vfiqeuevs",
      "name": "代码运行#7",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -12.86934556578899,
        "y": -4535.895813206505
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "这些变量会作为代码的运行的输入参数",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "string",
          "canEdit": true,
          "key": "userMessage",
          "label": "userMessage",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "arrayString",
          "canEdit": true,
          "key": "messageHistory",
          "label": "messageHistory",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            [
              "VARIABLE_NODE_ID",
              "messageHistory"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "async function main({ userMessage, messageHistory }) {\n    // 1. 验证输入类型\n    if (typeof userMessage !== 'string') {\n        throw new Error('userMessage必须是字符串类型');\n    }\n    if (!Array.isArray(messageHistory)) {\n        throw new Error('messageHistory必须是字符串数组');\n    }\n    \n    // 2. 创建新的消息历史数组（避免修改原数组）\n    const updatedMessageHistory = [...messageHistory];\n    \n    // 3. 检查是否需要添加消息（避免重复）\n    const trimmedMessage = userMessage.trim();\n    let messageAdded = false;\n    \n    if (trimmedMessage !== '') {\n        // 检查最后一条消息是否与当前消息相同\n        const lastMessage = updatedMessageHistory[updatedMessageHistory.length - 1];\n        \n        if (lastMessage !== trimmedMessage) {\n            // 只有当最后一条消息与当前消息不同时才添加\n            updatedMessageHistory.push(trimmedMessage);\n            messageAdded = true;\n        }\n    }\n    \n    // 4. 返回更新后的消息历史\n    return {\n        messageHistory: updatedMessageHistory,\n        messageCount: updatedMessageHistory.length,\n        latestMessage: userMessage,\n        messageAdded: messageAdded,  // 标记是否实际添加了消息\n        success: true\n    };\n} ",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "messageHistory",
          "valueType": "arrayString",
          "label": "messageHistory",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "kD6wfnMy9wpiYQ4a",
      "name": "代码运行#8",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -92.93954664337957,
        "y": -3424.9725837578326
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "这些变量会作为代码的运行的输入参数",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "arrayString",
          "canEdit": true,
          "key": "messageHistory",
          "label": "messageHistory",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            [
              "yVnZRa0Vfiqeuevs",
              "qLUQfhG0ILRX"
            ]
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main({ messageHistory }) \n{\n  let message_length = 0;\n  \n  // 验证输入是否为数组\n  if (!Array.isArray(messageHistory)) {\n    throw new Error(\"messageHistory must be an array\");\n  }\n  \n  // 遍历数组中的每个字符串\n  for (const message of messageHistory) {\n    // 确保元素是字符串类型\n    if (typeof message !== 'string') continue;\n    \n    // 遍历字符串的每个字符\n    for (let i = 0; i < message.length; i++) {\n      const char = message[i];\n      \n      // 使用正则判断是否为中文字符 [2,5](@ref)\n      if (/[\\u4e00-\\u9fa5]/.test(char)) {\n        message_length += 2;  // 中文字符计2长度\n      } else {\n        message_length += 1;  // 非中文字符计1长度\n      }\n    }\n  }\n  \n  return {\n    message_length: message_length\n  };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "message_length",
          "valueType": "number",
          "label": "message_length",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "mDwtJHqlfSQB0KOp",
      "name": "代码运行#9",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -114.39789550854672,
        "y": -2382.683127587292
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "这些变量会作为代码的运行的输入参数",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "message_length",
          "label": "message_length",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "kD6wfnMy9wpiYQ4a",
            "qLUQfhG0ILRX"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "Reading_speed",
          "label": "Reading_speed",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "Reading_speed"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main({ message_length, Reading_speed }) {\n  // 使用传入的Reading_speed作为阅读速度（字符每分钟）\n  const wordsPerMinute = Reading_speed;\n  \n  // 计算阅读分钟数 = 字符数 / 阅读速度\n  const minutes = message_length / wordsPerMinute;\n  \n  // 将分钟转换为毫秒（乘以60再乘以1000）并四舍五入取整\n  const read_time = Math.round(minutes * 60 * 1000);\n  \n  // 确保最小阅读时间为1秒（避免0秒情况）\n  const final_read_time = Math.max(1, read_time);\n  \n  return {\n    read_time: final_read_time\n  };\n}",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "read_time",
          "valueType": "number",
          "label": "read_time",
          "valueDesc": "",
          "description": ""
        }
      ]
    },
    {
      "nodeId": "dkmqUNUovXQPNC7T",
      "name": "代码运行#10",
      "intro": "执行一段简单的脚本代码，通常用于进行复杂的数据处理。",
      "avatar": "core/workflow/template/codeRun",
      "flowNodeType": "code",
      "showStatus": true,
      "position": {
        "x": -92.93954664337957,
        "y": -1232.279891102692
      },
      "inputs": [
        {
          "key": "system_addInputParam",
          "renderTypeList": [
            "addInputParam"
          ],
          "valueType": "dynamic",
          "label": "",
          "required": false,
          "description": "这些变量会作为代码的运行的输入参数",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "valueDesc": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "read_time",
          "label": "read_time",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "mDwtJHqlfSQB0KOp",
            "qLUQfhG0ILRX"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "renderTypeList": [
            "reference"
          ],
          "valueType": "number",
          "canEdit": true,
          "key": "lastTime",
          "label": "lastTime",
          "customInputConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": true
          },
          "required": true,
          "value": [
            "VARIABLE_NODE_ID",
            "lastTime"
          ],
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "codeType",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "js",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "code",
          "renderTypeList": [
            "custom"
          ],
          "label": "",
          "valueType": "string",
          "value": "function main({ lastTime, read_time }) {\n    const currentTime = Date.now();\n    \n    // 如果lastTime不存在，isTimeUp为false\n    if (!lastTime) {\n        return {\n            isTimeUp: false,\n            elapsedTime: 0,\n            currentTime: currentTime\n        };\n    }\n    \n    const elapsedTime = currentTime - lastTime;\n    \n    return {\n        isTimeUp: elapsedTime >= read_time,\n        elapsedTime: elapsedTime,\n        currentTime: currentTime\n    };\n} ",
          "valueDesc": "",
          "description": "",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": [
        {
          "id": "system_addOutputParam",
          "key": "system_addOutputParam",
          "type": "dynamic",
          "valueType": "dynamic",
          "label": "",
          "customFieldConfig": {
            "selectValueTypeList": [
              "string",
              "number",
              "boolean",
              "object",
              "arrayString",
              "arrayNumber",
              "arrayBoolean",
              "arrayObject",
              "arrayAny",
              "any",
              "chatHistory",
              "datasetQuote",
              "dynamic",
              "selectDataset",
              "selectApp"
            ],
            "showDescription": false,
            "showDefaultValue": false
          },
          "description": "将代码中 return 的对象作为输出，传递给后续的节点。变量名需要对应 return 的 key",
          "valueDesc": ""
        },
        {
          "id": "system_rawResponse",
          "key": "system_rawResponse",
          "label": "完整响应数据",
          "valueType": "object",
          "type": "static",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "error",
          "key": "error",
          "label": "运行错误",
          "description": "代码运行错误信息，成功时返回空",
          "valueType": "object",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "qLUQfhG0ILRX",
          "type": "dynamic",
          "key": "isTimeUp",
          "valueType": "boolean",
          "label": "isTimeUp",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "gR0mkQpJ4Og8",
          "type": "dynamic",
          "key": "elapsedTime",
          "valueType": "number",
          "label": "elapsedTime",
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "kHBeqNihbU33ClGI",
          "valueType": "number",
          "type": "dynamic",
          "key": "currentTime",
          "label": "currentTime"
        }
      ]
    }
  ],
  "edges": [
    {
      "source": "dT1wVEwObdVg",
      "target": "ivmHqG9kkBrT",
      "sourceHandle": "dT1wVEwObdVg-source-right",
      "targetHandle": "ivmHqG9kkBrT-target-left"
    },
    {
      "source": "ivmHqG9kkBrT",
      "target": "a5uiaEgOM4WO",
      "sourceHandle": "ivmHqG9kkBrT-source-ELSE",
      "targetHandle": "a5uiaEgOM4WO-target-left"
    },
    {
      "source": "rnwjrpJfE6aH",
      "target": "nwPJXGoYdE05",
      "sourceHandle": "rnwjrpJfE6aH-source-right",
      "targetHandle": "nwPJXGoYdE05-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "dT1wVEwObdVg",
      "sourceHandle": "wNuXxATuX5xq-source-sdfa",
      "targetHandle": "dT1wVEwObdVg-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "zkTTthv5ESTI",
      "sourceHandle": "wNuXxATuX5xq-source-wqre",
      "targetHandle": "zkTTthv5ESTI-target-left"
    },
    {
      "source": "zkTTthv5ESTI",
      "target": "ldqeU1xzik0X",
      "sourceHandle": "zkTTthv5ESTI-source-right",
      "targetHandle": "ldqeU1xzik0X-target-left"
    },
    {
      "source": "ldqeU1xzik0X",
      "target": "g51Bn8L1yqRo",
      "sourceHandle": "ldqeU1xzik0X-source-right",
      "targetHandle": "g51Bn8L1yqRo-target-left"
    },
    {
      "source": "hVce85CWE3zp",
      "target": "dkGlTVzLIcv9",
      "sourceHandle": "hVce85CWE3zp-source-right",
      "targetHandle": "dkGlTVzLIcv9-target-left"
    },
    {
      "source": "dkGlTVzLIcv9",
      "target": "tFcqTpLIhvsi",
      "sourceHandle": "dkGlTVzLIcv9-source-ELSE",
      "targetHandle": "tFcqTpLIhvsi-target-left"
    },
    {
      "source": "fQPDvwr6U4fi",
      "target": "hVce85CWE3zp",
      "sourceHandle": "fQPDvwr6U4fi-source-right",
      "targetHandle": "hVce85CWE3zp-target-left"
    },
    {
      "source": "g51Bn8L1yqRo",
      "target": "ihqM5pk7kYAW",
      "sourceHandle": "g51Bn8L1yqRo-source-right",
      "targetHandle": "ihqM5pk7kYAW-target-left"
    },
    {
      "source": "ihqM5pk7kYAW",
      "target": "azV2kbvbYuez",
      "sourceHandle": "ihqM5pk7kYAW-source-ELSE IF 1",
      "targetHandle": "azV2kbvbYuez-target-left"
    },
    {
      "source": "lzWFvVzSC9LK",
      "target": "sFHNLWjiPXG1",
      "sourceHandle": "lzWFvVzSC9LK-source-ELSE IF 1",
      "targetHandle": "sFHNLWjiPXG1-target-left"
    },
    {
      "source": "lzWFvVzSC9LK",
      "target": "rnwjrpJfE6aH",
      "sourceHandle": "lzWFvVzSC9LK-source-ELSE",
      "targetHandle": "rnwjrpJfE6aH-target-left"
    },
    {
      "source": "sFHNLWjiPXG1",
      "target": "vtGgI1kzNsOz",
      "sourceHandle": "sFHNLWjiPXG1-source-right",
      "targetHandle": "vtGgI1kzNsOz-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "dT1wVEwObdVg",
      "sourceHandle": "wNuXxATuX5xq-source-kHYT4lUV2MaG",
      "targetHandle": "dT1wVEwObdVg-target-left"
    },
    {
      "source": "448745",
      "target": "znqFzRFbSt9C",
      "sourceHandle": "448745-source-right",
      "targetHandle": "znqFzRFbSt9C-target-left"
    },
    {
      "source": "znqFzRFbSt9C",
      "target": "lzWFvVzSC9LK",
      "sourceHandle": "znqFzRFbSt9C-source-right",
      "targetHandle": "lzWFvVzSC9LK-target-left"
    },
    {
      "source": "ihqM5pk7kYAW",
      "target": "rwg5bEtZ9SgQ",
      "sourceHandle": "ihqM5pk7kYAW-source-IF",
      "targetHandle": "rwg5bEtZ9SgQ-target-left"
    },
    {
      "source": "rwg5bEtZ9SgQ",
      "target": "ckmT4dbDfiDU",
      "sourceHandle": "rwg5bEtZ9SgQ-source-IF",
      "targetHandle": "ckmT4dbDfiDU-target-left"
    },
    {
      "source": "rwg5bEtZ9SgQ",
      "target": "aEcNlABa4Z4N",
      "sourceHandle": "rwg5bEtZ9SgQ-source-ELSE",
      "targetHandle": "aEcNlABa4Z4N-target-left"
    },
    {
      "source": "ckmT4dbDfiDU",
      "target": "tTaedrk67ylJ",
      "sourceHandle": "ckmT4dbDfiDU-source-right",
      "targetHandle": "tTaedrk67ylJ-target-left"
    },
    {
      "source": "aEcNlABa4Z4N",
      "target": "yDO586wQ8hbr",
      "sourceHandle": "aEcNlABa4Z4N-source-right",
      "targetHandle": "yDO586wQ8hbr-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "vayWGgFNEx7q",
      "sourceHandle": "wNuXxATuX5xq-source-jAHIz73GtWUv",
      "targetHandle": "vayWGgFNEx7q-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "vd3nDoJ6eQT5",
      "sourceHandle": "wNuXxATuX5xq-source-jAHIz73GtWUv",
      "targetHandle": "vd3nDoJ6eQT5-target-left"
    },
    {
      "source": "vd3nDoJ6eQT5",
      "target": "iOTQB7O5REM7",
      "sourceHandle": "vd3nDoJ6eQT5-source-right",
      "targetHandle": "iOTQB7O5REM7-target-left"
    },
    {
      "source": "iOTQB7O5REM7",
      "target": "cg1IncFagE5I",
      "sourceHandle": "iOTQB7O5REM7-source-IF",
      "targetHandle": "cg1IncFagE5I-target-left"
    },
    {
      "source": "iOTQB7O5REM7",
      "target": "wjQPQH188Dmn",
      "sourceHandle": "iOTQB7O5REM7-source-ELSE",
      "targetHandle": "wjQPQH188Dmn-target-left"
    },
    {
      "source": "tFcqTpLIhvsi",
      "target": "zBElzg1qdMBBvZSV",
      "sourceHandle": "tFcqTpLIhvsi-source-right",
      "targetHandle": "zBElzg1qdMBBvZSV-target-left"
    },
    {
      "source": "zBElzg1qdMBBvZSV",
      "target": "f4ONvBfsTMxJjESh",
      "sourceHandle": "zBElzg1qdMBBvZSV-source-right",
      "targetHandle": "f4ONvBfsTMxJjESh-target-left"
    },
    {
      "source": "f4ONvBfsTMxJjESh",
      "target": "jQIsvimP2gn6",
      "sourceHandle": "f4ONvBfsTMxJjESh-source-right",
      "targetHandle": "jQIsvimP2gn6-target-left"
    },
    {
      "source": "g51Bn8L1yqRo",
      "target": "xnFSVwiYPfDzSfUy",
      "sourceHandle": "g51Bn8L1yqRo-source-right",
      "targetHandle": "xnFSVwiYPfDzSfUy-target-left"
    },
    {
      "source": "448745",
      "target": "ykAWqAQpDMMbHVvg",
      "sourceHandle": "448745-source-right",
      "targetHandle": "ykAWqAQpDMMbHVvg-target-left"
    },
    {
      "source": "ykAWqAQpDMMbHVvg",
      "target": "nWHcHPDeFOjZKz34",
      "sourceHandle": "ykAWqAQpDMMbHVvg-source-right",
      "targetHandle": "nWHcHPDeFOjZKz34-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "cas2KPhA7XTvxYaP",
      "sourceHandle": "wNuXxATuX5xq-source-hT2o927WkfiEespn",
      "targetHandle": "cas2KPhA7XTvxYaP-target-left"
    },
    {
      "source": "cas2KPhA7XTvxYaP",
      "target": "dT1wVEwObdVg",
      "sourceHandle": "cas2KPhA7XTvxYaP-source-IF",
      "targetHandle": "dT1wVEwObdVg-target-left"
    },
    {
      "source": "cas2KPhA7XTvxYaP",
      "target": "o5pKYgQwFmMY4EJC",
      "sourceHandle": "cas2KPhA7XTvxYaP-source-ELSE",
      "targetHandle": "o5pKYgQwFmMY4EJC-target-left"
    },
    {
      "source": "lzWFvVzSC9LK",
      "target": "pnE1bYcAbiJ78vRc",
      "sourceHandle": "lzWFvVzSC9LK-source-IF",
      "targetHandle": "pnE1bYcAbiJ78vRc-target-left"
    },
    {
      "source": "pnE1bYcAbiJ78vRc",
      "target": "vtGgI1kzNsOz",
      "sourceHandle": "pnE1bYcAbiJ78vRc-source-right",
      "targetHandle": "vtGgI1kzNsOz-target-left"
    },
    {
      "source": "ivmHqG9kkBrT",
      "target": "bBOHTNOPHJKF2JYk",
      "sourceHandle": "ivmHqG9kkBrT-source-IF",
      "targetHandle": "bBOHTNOPHJKF2JYk-target-left"
    },
    {
      "source": "ivmHqG9kkBrT",
      "target": "yo0TQ64kIto5iJYE",
      "sourceHandle": "ivmHqG9kkBrT-source-IF",
      "targetHandle": "yo0TQ64kIto5iJYE-target-left"
    },
    {
      "source": "yo0TQ64kIto5iJYE",
      "target": "c0bYEbxvrcCk",
      "sourceHandle": "yo0TQ64kIto5iJYE-source-wqre",
      "targetHandle": "c0bYEbxvrcCk-target-left"
    },
    {
      "source": "yo0TQ64kIto5iJYE",
      "target": "bX87cG1a64mOeaSD",
      "sourceHandle": "yo0TQ64kIto5iJYE-source-sdfa",
      "targetHandle": "bX87cG1a64mOeaSD-target-left"
    },
    {
      "source": "wNuXxATuX5xq",
      "target": "yo0TQ64kIto5iJYE",
      "sourceHandle": "wNuXxATuX5xq-source-hT2o927WkfiEespn",
      "targetHandle": "yo0TQ64kIto5iJYE-target-left"
    },
    {
      "source": "448745",
      "target": "f9lH2t9V1nyfWq26",
      "sourceHandle": "448745-source-right",
      "targetHandle": "f9lH2t9V1nyfWq26-target-left"
    },
    {
      "source": "f9lH2t9V1nyfWq26",
      "target": "eAW42fKc7QKM",
      "sourceHandle": "f9lH2t9V1nyfWq26-source-right",
      "targetHandle": "eAW42fKc7QKM-target-left"
    },
    {
      "source": "a5uiaEgOM4WO",
      "target": "k2GVkiLq4s6frmgR",
      "sourceHandle": "a5uiaEgOM4WO-source-right",
      "targetHandle": "k2GVkiLq4s6frmgR-target-left"
    },
    {
      "source": "bBOHTNOPHJKF2JYk",
      "target": "iZc3eGlr3ChZyAUk",
      "sourceHandle": "bBOHTNOPHJKF2JYk-source-right",
      "targetHandle": "iZc3eGlr3ChZyAUk-target-left"
    },
    {
      "source": "cg1IncFagE5I",
      "target": "lnXQqB0i9ggATU6F",
      "sourceHandle": "cg1IncFagE5I-source-right",
      "targetHandle": "lnXQqB0i9ggATU6F-target-left"
    },
    {
      "source": "wjQPQH188Dmn",
      "target": "cyKM3pSeUJIzKzFB",
      "sourceHandle": "wjQPQH188Dmn-source-right",
      "targetHandle": "cyKM3pSeUJIzKzFB-target-left"
    },
    {
      "source": "eIIzZvCz1WSHmlCX",
      "target": "wNuXxATuX5xq",
      "sourceHandle": "eIIzZvCz1WSHmlCX-source-IF",
      "targetHandle": "wNuXxATuX5xq-target-left"
    },
    {
      "source": "eIIzZvCz1WSHmlCX",
      "target": "q34qp7W7TkfMUijE",
      "sourceHandle": "eIIzZvCz1WSHmlCX-source-ELSE",
      "targetHandle": "q34qp7W7TkfMUijE-target-left"
    },
    {
      "source": "oOC8eGIVy7BX6HLx",
      "target": "dXhBdHFIEX2vCaIO",
      "sourceHandle": "oOC8eGIVy7BX6HLx-source-right",
      "targetHandle": "dXhBdHFIEX2vCaIO-target-left"
    },
    {
      "source": "nwPJXGoYdE05",
      "target": "yVnZRa0Vfiqeuevs",
      "sourceHandle": "nwPJXGoYdE05-source-right",
      "targetHandle": "yVnZRa0Vfiqeuevs-target-left"
    },
    {
      "source": "yVnZRa0Vfiqeuevs",
      "target": "kD6wfnMy9wpiYQ4a",
      "sourceHandle": "yVnZRa0Vfiqeuevs-source-right",
      "targetHandle": "kD6wfnMy9wpiYQ4a-target-left"
    },
    {
      "source": "kD6wfnMy9wpiYQ4a",
      "target": "mDwtJHqlfSQB0KOp",
      "sourceHandle": "kD6wfnMy9wpiYQ4a-source-right",
      "targetHandle": "mDwtJHqlfSQB0KOp-target-left"
    },
    {
      "source": "mDwtJHqlfSQB0KOp",
      "target": "dkmqUNUovXQPNC7T",
      "sourceHandle": "mDwtJHqlfSQB0KOp-source-right",
      "targetHandle": "dkmqUNUovXQPNC7T-target-left"
    },
    {
      "source": "dkmqUNUovXQPNC7T",
      "target": "eIIzZvCz1WSHmlCX",
      "sourceHandle": "dkmqUNUovXQPNC7T-source-right",
      "targetHandle": "eIIzZvCz1WSHmlCX-target-left"
    },
    {
      "source": "dkmqUNUovXQPNC7T",
      "target": "oOC8eGIVy7BX6HLx",
      "sourceHandle": "dkmqUNUovXQPNC7T-source-right",
      "targetHandle": "oOC8eGIVy7BX6HLx-target-left"
    }
  ],
  "chatConfig": {
    "variables": [
      {
        "id": "f24nso",
        "key": "dialogueCount",
        "label": "dialogueCount",
        "type": "custom",
        "description": "记录对话的轮数每次对话+1",
        "required": false,
        "valueType": "number",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ],
        "icon": "core/workflow/inputType/customVariable"
      },
      {
        "id": "mhc4mj",
        "key": "role",
        "label": "role",
        "type": "custom",
        "description": "角色设定",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "kexym8",
        "key": "nickName",
        "label": "nickName",
        "type": "custom",
        "description": "聊天好友昵称",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "flyqja",
        "key": "accountNo",
        "label": "accountNo",
        "type": "custom",
        "description": "oaid",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "6iki0u",
        "key": "nickId",
        "label": "nickId",
        "type": "custom",
        "description": "",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "5j8x6o",
        "key": "dialogues",
        "label": "dialogues",
        "type": "custom",
        "description": "客户对话",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "92uieg",
        "key": "dialoguesArr",
        "label": "dialoguesArr",
        "type": "custom",
        "description": "存客户对话的数组",
        "required": false,
        "valueType": "arrayString",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "b9ffro",
        "key": "projectName",
        "label": "projectName",
        "type": "custom",
        "description": "项目名称",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "zgqbbo",
        "key": "processType",
        "label": "processType",
        "type": "custom",
        "description": "processType  流程类型   test  (测试)     activation （主动激活）",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "uzumbd",
        "key": "confirmAgain",
        "label": "confirmAgain",
        "type": "custom",
        "description": "再次确认项目名称",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "0",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "iirlqs",
        "key": "noticeDate",
        "label": "noticeDate",
        "type": "custom",
        "description": "通知日期",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "8v7lwb",
        "key": "currentDate",
        "label": "currentDate",
        "type": "custom",
        "description": "当前日期",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "5o1ub8",
        "key": "sameTime",
        "label": "sameTime",
        "type": "custom",
        "description": "判断是否相同时间",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "0",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ],
        "icon": "core/workflow/inputType/input"
      },
      {
        "id": "5dfcut",
        "key": "accountWxid",
        "label": "accountWxid",
        "type": "custom",
        "description": " 服秘Wxid",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "fb6jdj",
        "key": "project",
        "label": "project",
        "type": "custom",
        "description": "增加主推项目",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ],
        "icon": "core/workflow/inputType/customVariable"
      },
      {
        "id": "seu13d",
        "key": "userNickId",
        "label": "userNickId",
        "type": "custom",
        "description": "服秘微信ID",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "25fgw0",
        "key": "projectStr",
        "label": "projectStr",
        "type": "custom",
        "description": "传入的主推项目",
        "required": false,
        "valueType": "string",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ],
        "icon": "core/workflow/inputType/customVariable"
      },
      {
        "id": "ljgoen",
        "key": "lastTime",
        "label": "lastTime",
        "type": "numberInput",
        "description": "上次对话的时间",
        "required": false,
        "valueType": "number",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "7c2w31",
        "key": "messageHistory",
        "label": "messageHistory",
        "type": "custom",
        "description": "用于拟人化存储未回复的对话信息",
        "required": false,
        "valueType": "arrayString",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": "",
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      },
      {
        "id": "uf2865",
        "key": "Reading_speed",
        "label": "Reading_speed",
        "type": "numberInput",
        "description": "阅读速度",
        "required": false,
        "valueType": "number",
        "list": [
          {
            "value": "",
            "label": ""
          }
        ],
        "defaultValue": 200,
        "enums": [
          {
            "value": "",
            "label": ""
          }
        ]
      }
    ],
    "whisperConfig": {
      "open": false,
      "autoSend": false,
      "autoTTSResponse": false
    },
    "scheduledTriggerConfig": {
      "cronString": "0 0 * * *",
      "timezone": "Asia/Shanghai",
      "defaultPrompt": ""
    },
    "_id": "672ae56b41541f3ae99841ca"
  }
}